
<!DOCTYPE html>
<html lang="zh">

    <head>
        <meta charset="UTF-8" />
        <title>日历</title>
<style type="text/css">

			#td1{ color:blue;}
			#td2{ color:red; }


	
		</style>
    </head>

    <body>
      
               <center>
					<div   style="display:none">
                    <select name="year" id="year" class="form-control" onchange="changeyear()">
                        <option value="2019">2019</option>
                    </select>
              </div>
<div>
                 <div style="position:absolute;left:380px;top:100px" >
                    <select name="month" id="month" class="form-control" onchange="changemonth()">
                        <option value="1" >1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                    </select>
                </div>
              
            
                    <div style="position:absolute;left:80px;top:120px">
                        <table  style="width: 44%;margin:auto "  bgcolor="gray">
                            <tr > 
                                <th>月</th>
                                <th>火</th>
                                <th>水</th>
                                <th>木</th>
                                <th>金</th>
                                <th id ="td1">土</th>
                                <th id ="td2" >日</th>
                            </tr>
				</table>
				</div>
				
				<div  style="text-align:center " >
				<table style="width: 40%;margin:auto">
                            <tr>
                                <td>30</td>
                                <td>31</td>
                                <td>1</td>
                                <td>2</td>
                                <td>3</td>
             				    <td id ="td1">4</td>   
                                <td id ="td2">5</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>7</td>
                                <td>8</td>
                                <td>9</td>
                                <td>10</td>
                                <td>11</td>
                                <td>12</td>
                            </tr>
                            <tr>
                                <td>13</td>
                                <td>14</td>
                                <td>15</td>
                                <td>16</td>
                                <td>17</td>
                                <td>18</td>
                                <td>19</td>
                            </tr>
                            <tr>
                                <td>20</td>
                                <td>21</td>
                                <td>22</td>
                                <td>23</td>
                                <td>24</td>
                                <td>25</td>
                                <td>26</td>
                            </tr>
                            <tr>
                                <td>27</td>
                                <td>28</td>
                                <td>29</td>
                                <td>30</td>
                                <td>31</td>
                                <td>1</td>
                                <td>2</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>4</td>
                                <td>5</td>
                                <td>6</td>
                                <td>7</td>
                                <td>8</td>
                                <td>9</td>
                            </tr>
                        </table>
</div>
</center>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            var date = new Date(); 
            var year = year = date.getFullYear(); 
            var moth = date.getMonth();
            var nday = date.getDate(); 
            var adays = document.getElementsByTagName('td');
            console.log(year + '/' + moth)

            var nlstr = new Date(year, moth, 1); 
            var nld = nlstr.getDay();
            if(nld == 0) {
                nld = 7;

            }
            var days = new Array(31, 28 + is_leap(year), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
            var ayear = document.getElementById('year');
            for(var i = 0; i < ayear.length; i++) {
                if(ayear[i].value == year) {
                    ayear[i].selected = true;
                    break;
                }
            }
            var amoth = document.getElementById('month');
            for(var i = 0; i < amoth.length; i++) {
                if(amoth[i].value - 1 == moth) {
                    amoth[i].selected = true;
                    break;
                }
            }


            function is_leap(year) { 
                return(year % 100 == 0 ? res = (year % 400 == 0 ? 1 : 0) : res = (year % 4 == 0 ? 1 : 0));
            }

            function $(id) {
                return document.getElementById(id)
            }

            function calendar(year, moth, nday) { 
                nlstr = new Date(year, moth, 1); 
                nld = nlstr.getDay();
                if(nld == 0) {
                    nld = 7;
                }

                var ds1 = days[moth];
                var ds
                if(moth === 0) {
                    ds = days[11];
                } else {
                    ds = days[moth - 1];

                }
                for(var i = 0; i < adays.length; i++) {
                    adays[i].removeEventListener('click', null);
                    adays[i].className = '';
                    if(i < nld - 1) {

                        var d = ds - nld + i + 2;
                        adays[i].innerHTML = d;
                        adays[i].style.color = "rgba(0,0,0,0.3)";
                        continue;
                    } else if(i < days[moth] + nld - 1) {

                        var d = i - nld + 2;
                        adays[i].innerHTML = d;
                        adays[i].style.color = "rgba(0,0,0,1.0)";
                        adays[i].addEventListener('click', function() {
                        
                            console.log(1)
                            nday = this.innerHTML;
                            calendar(year, moth, nday);
                        });
                        if(adays[i].innerHTML == nday && year == year && moth == moth) {
                            adays[i].className = 'alert-info';
                        }
                        continue;
                    } else if(i > days[moth] + nld - 2) {
                        var d = i - ds1 - nld + 2;
                        adays[i].innerHTML = d;
                        adays[i].style.color = "rgba(0,0,0,0.3)";
                    }

                }
            }
            calendar(year, moth, nday)



            function changeyear() {
                for(var i = 0; i < ayear.length; i++) {
                    if(ayear[i].selected == true) {

                        year = ayear[i].innerText;

                        calendar(year, moth, nday);
                    }
                }
            }

            function changemonth() {
                for(var i = 0; i < amoth.length; i++) {
                    if(amoth[i].selected == true) {
                        moth = amoth[i].innerText - 1;
                        calendar(year, moth, nday);
								

                    }
                }
            }
        </script>
    </body>

</html>
