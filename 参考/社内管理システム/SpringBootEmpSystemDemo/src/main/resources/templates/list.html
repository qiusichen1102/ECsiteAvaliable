<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>社員基本情報一覧</title>

<link rel="stylesheet"
	href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
<link rel="stylesheet" href="./css/newStyle.css">
<script
	src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script>
	function fileCheck() {
		var file = document.getElementsByName('filename')[0].value;
		if (file.length > 0) {
			document.getElementById('importButton').disabled = false;
		} else {
			document.getElementById('importButton').disabled = true;
		}
	}
</script>
<script src="./js/script.js"></script>
</head>
<body>
	<div class="container-fluid">
		<div class="bg-primary" align="center">
			<h3>社員基本情報一覧画面</h3>
		</div>
		<!-- 機能 -->

		<div class="row">
			<div>

				<form action="toAdd" style="display: inline;">
					<input class="btn btn-primary" type="submit" value="新規社員登録" />
				</form>

				<input class="btn btn-primary" value="戻る" size="3"
					onclick="location.href='./menu'">

			</div>
		</div>
			<div id="div">
				<form action="search" method="get">
					<div class="form-group">
						<div class="form-search">
							<input type="text" class="form-search" name="keyword"
								id="txtname" placeholder="社員番号/名前" th:value="${keyword}"><input
								type="submit" value="検索" class="btn btn-primary">
						</div>
					</div>
				</form>
			</div>

			<!--export  -->

			<div class="export">
				<a href="/_Export">
					<button type="button" class="btn btn-primary" name="emp" th:if="${countEmployee}">エクスポート</button>
				</a>



				<!--import  -->

				<form class="form-horizontal" id="form_table" action="/_Import"
					enctype="multipart/form-data" method="post"
					style="display: inline;">
					<button type="submit" class="btn btn-primary" id="importButton"
						disabled  >インポート</button>
					<input class="form-input" type="file" name="filename"
						style="display: inline;" oninput="fileCheck()" 
						 accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"></input> <input
						type="hidden" th:name="${_csrf.parameterName}"
						th:value="${_csrf.token}" />
				</form>

			</div>


	</div>

	<!-- 社員リスト -->
	<div align="center" class="table-responsive">
		<table class="table table-hover table-striped">
			<thead>
				<tr>
					<th><div align="center">社員番号</div></th>
					<th><div align="center">個人メールアドレス</div></th>
					<th><div align="center">会社メールアドレス</div></th>
					<th><div align="center">名前（漢字）</div></th>
					<th><div align="center">名前（カナ）</div></th>
					<th><div align="center">性別</div></th>
					<th><div align="center">生年月日</div></th>
					<th><div align="center">国籍</div></th>
					<th><div align="center">郵便番号</div></th>
					<th><div align="center">住所</div></th>
					<th><div align="center">電話番号</div></th>
					<th><div align="center">最寄駅</div></th>
					<th><div align="center">入社日付</div></th>
					<th><div align="center">退職日付</div></th>
					<th><div align="center">所属会社</div></th>
					<th><div align="center">社員区分</div></th>
					<th><div align="center">備考</div></th>
					<th colspan="2"><div align="center">操作</div></th>
				</tr>
			</thead>

			<tbody>
				<tr th:each="emp:${empList}" th:var="emp" bgcolor="white" class="y"
					th:if="${countEmployee}">
					<td>
						<form action="/toDetails">
							<div align="center">
								<input type="hidden" name="id" th:value="${emp.getEmpCd()}" />
								<input class="btn btn-primary" type="submit"
									th:value="${emp.getEmpCd()}" />
							</div>
						</form>
					</td>
					
					<td><div align="center">[[${emp.getEmail()}]]</div></td>
					<td><div align="center">[[${emp.getCompanyEmail()}]]</div></td>
					<td><div align="center">[[${emp.getNameKanji()}]]</div></td>
					<td><div align="center">[[${emp.getNameKana()}]]</div></td>
					<td><div align="center">[[${emp.getSex()}]]</div></td>
					<td><div align="center">[[${#dates.format(emp.getBirthday(),'yyyy-MM-dd')}]]</div></td>
					<td><div align="center">[[${emp.getCountry()}]]</div></td>
					<td><div align="center">[[${emp.getPostcode()}]]</div></td>
					<td><div align="center">[[${emp.getAddress()}]]</div></td>
					<td><div align="center">[[${emp.getTelNo()}]]</div></td>
					<td><div align="center">[[${emp.getHomeStation()}]]</div></td>
					<td><div align="center">[[${#dates.format(emp.getEnteringDate(),'yyyy-MM-dd')}]]</div></td>
					<td><div align="center">[[${#dates.format(emp.getDimissionDate(),'yyyy-MM-dd')}]]</div></td>
					<td><div align="center">[[${emp.getCompany()}]]</div></td>
					<td><div align="center">[[${emp.getEmployeeType()}]]</div></td>
					<td><div align="center">[[${emp.getComment()}]]</div></td>

					<!--変更-->
					<td>
						<form action="/toUpdate">
							<div align="center">
								<input type="hidden" name="id" th:value="${emp.empCd}" /> <input
									class="btn btn-primary" type="submit" value="編集" />
							</div>
						</form>
					</td>
					<!-- <div align="center">
							<a th:href="@{/{empCd}/toUpdate(empCd=${emp.empCd})}"><input
								class="btn btn-primary"  type="button" value="編集" /></a>
						</div> -->


					<!--削除-->
					<td>
						<form action="delete">
							<div align="center">
								<input type="hidden" name="id" th:value="${emp.empCd}" /> <input
									class="btn btn-primary" type="submit" value="削除"
									onClick="return delete_confirm()" />
							</div>
						</form>
					</td>
				</tr>

			</tbody>
		</table>
	</div>

	<div style="text-align: center; vertical-align: middel;">
		<form action="list" method="get">
			<p>
				社員数：<label th:text="${countEmployee}"></label>名
				<!-- 共<label th:text="${pageTotalNum}"></label> ページ　 -->
				<!-- 毎ページ項目数： -->
				<input type="hidden" name="pageSize" th:value="${pageSize}">
				<!-- 現在ページ： -->
				<input type="hidden" name="pageNum" th:value="${pageNum}">
				<!-- <input type="submit" value="ToGo" class="btn btn-primary" name="buttom"> -->
				<input type="submit" value="前へ"
					class="btn btn-primary"	name="button"	th:unless="${firstPage}">
				 <input type="submit" value="次へ"
					class="btn btn-primary" name="button" th:unless="${lastPage}">
			</p>
		</form>
	</div>


	<script type="text/javascript">
		//削除確認メセージ
		function delete_confirm() {
			if (window.confirm('項目を削除します。よろしいですが？')) {
				//alert("確認");
				return true;
			} else {
				//alert("キャンセル");
				return false;
			}
		}
	
	</script>

</body>
</html>